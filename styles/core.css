/*///////////////////////////////////////////////////////////////////////////*/
/* core.css - SOLID Framework Core Styles                                   */

/* Cascade Layer Definitions */
@layer reset, tokens, base, components, utilities;

/*///////////////////////////////////////////////////////////////////////////*/
/* RESET LAYER                                                               */
@layer reset {
  *, *:after, *:before { 
    background-clip: padding-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
  }
}

/*///////////////////////////////////////////////////////////////////////////*/
/* TOKENS LAYER                                                              */
@layer tokens {
  :root {
    /* Golden Ratio (φ ≈ 1.618) */
    --phi: 1.618;
    
    /* Spacing Scale - Refined for practical use
     * Base: 1rem (16px)
     * More practical intervals for comfortable whitespace
     * 2xs: 0.25rem  (4px)  - Minimal spacing
     * xs:  0.5rem   (8px)  - Tight spacing
     * sm:  0.75rem  (12px) - Small spacing
     * md:  1rem     (16px) - Base spacing
     * lg:  1.5rem   (24px) - Comfortable spacing
     * xl:  2rem     (32px) - Generous spacing
     * 2xl: 3rem     (48px) - Section spacing
     * 3xl: 4rem     (64px) - Large section spacing
     * 4xl: 6rem     (96px) - Extra large spacing
     */
    --space-2xs: 0.25rem;
    --space-xs: 0.5rem;
    --space-sm: 0.75rem;
    --space-md: 1rem;
    --space-lg: 1.5rem;
    --space-xl: 2rem;
    --space-2xl: 3rem;
    --space-3xl: 4rem;
    --space-4xl: 6rem;
    
    /* Border Radius Scale - Golden Ratio Based
     * Using 0.5rem as base for radius (smaller than spacing base)
     * xs:  base / φ  ≈ 0.309rem
     * sm:  base      = 0.500rem
     * md:  base × φ  ≈ 0.809rem
     * lg:  base × φ² ≈ 1.309rem
     */
    --radius-xs: 0.309rem;
    --radius-sm: 0.5rem;
    --radius: 0.809rem;
    --radius-lg: 1.309rem;
    
    /* Shadow Scale - Golden Ratio Based
     * Shadows use φ-based progression for depth and blur
     * Each level has increasingly prominent shadow with φ-scaled values
     * Format: offset blur spread color
     * 
     * sm:  Subtle shadow for slight elevation
     *      - y-offset: 1px, blur: 2px + 8px (φ ratio)
     * md:  Standard shadow for cards and buttons
     *      - y-offset: 2px, blur: 4px + 16px (each step × φ)
     * lg:  Prominent shadow for elevated components
     *      - y-offset: 4px, blur: 8px + 32px (double previous)
     * xl:  Deep shadow for modals and overlays
     *      - y-offset: 8px, blur: 16px + 64px (double previous)
     * 2xl: Maximum depth for floating elements
     *      - y-offset: 16px, blur: 32px + 128px (dramatic elevation)
     */
    --shadow-sm: 0 1px 2px rgba(0,0,0,.04), 0 1px 8px rgba(0,0,0,.06);
    --shadow: 0 2px 4px rgba(0,0,0,.06), 0 4px 16px rgba(0,0,0,.08);
    --shadow-lg: 0 4px 8px rgba(0,0,0,.08), 0 8px 32px rgba(0,0,0,.12);
    --shadow-xl: 0 8px 16px rgba(0,0,0,.12), 0 16px 64px rgba(0,0,0,.16);
    --shadow-2xl: 0 16px 32px rgba(0,0,0,.16), 0 32px 128px rgba(0,0,0,.20);
    
    /* Fluid Typography Scale - More controlled sizes
     * Tighter ranges for better readability across devices
     * Focus on preventing text from becoming too large
     */
    --text-xs: clamp(0.75rem, 0.5vw + 0.7rem, 0.8125rem);
    --text-sm: clamp(0.875rem, 0.5vw + 0.8rem, 0.9375rem);
    --text-base: clamp(1rem, 0.5vw + 0.95rem, 1.0625rem);
    --text-lg: clamp(1.125rem, 0.5vw + 1.075rem, 1.1875rem);
    --text-xl: clamp(1.25rem, 1vw + 1.15rem, 1.375rem);
    --text-2xl: clamp(1.5rem, 1.5vw + 1.3rem, 1.875rem);
    --text-3xl: clamp(1.875rem, 2vw + 1.5rem, 2.5rem);
    --text-4xl: clamp(2.25rem, 2.5vw + 1.75rem, 3rem);
    --text-5xl: clamp(2.5rem, 3vw + 2rem, 3.5rem);
    --text-6xl: clamp(3rem, 4vw + 2.25rem, 4.5rem);
    
    /* Line Height Scale - Refined for readability
     * Adjusted for optimal reading comfort
     * none:     1.000 (no extra space)
     * tight:    1.25  (headings)
     * snug:     1.375 (subheadings)
     * normal:   1.5   (body text baseline)
     * relaxed:  1.65  (comfortable reading)
     * loose:    1.8   (very spacious)
     */
    --leading-none: 1;
    --leading-tight: 1.25;
    --leading-snug: 1.375;
    --leading-normal: 1.5;
    --leading-relaxed: 1.65;
    --leading-loose: 1.8;
    
    /* Letter Spacing Scale - More subtle */
    --tracking-tighter: -0.025em;
    --tracking-tight: -0.0125em;
    --tracking-normal: 0em;
    --tracking-wide: 0.01em;
    --tracking-wider: 0.025em;
    --tracking-widest: 0.05em;
    
    /* Transition Durations */
    --duration-fast: 150ms;
    --duration-normal: 250ms;
    --duration-slow: 350ms;
    
    /* Easing Functions */
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/*///////////////////////////////////////////////////////////////////////////*/
/* BASE LAYER                                                                */
@layer base {
  /* Global Motion Preferences */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
  
  /* High Contrast Preferences */
  @media (prefers-contrast: more) {
    :root {
      --focus-ring: currentColor;
    }
  }
  
  /* Body Styles */
  body {
    background-color: var(--body-background-color);
    color: var(--body-text-color);
    font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: var(--text-base);
    font-weight: 400;
    letter-spacing: var(--tracking-normal);
    line-height: var(--leading-normal);
    -webkit-font-smoothing: antialiased;
    margin: 0;
    padding: 0;
    text-rendering: optimizelegibility;
    word-wrap: break-word;
    overflow: auto;
  }

  /* Accessibility: Focus Indicators */
  :where(input, select, textarea, button, a):focus-visible {
    outline: 2px solid var(--focus-ring, var(--color-primary-foundation));
    outline-offset: 2px;
  }

  /* Legacy focus removal only for mouse interactions */
  input:focus:not(:focus-visible),
  select:focus:not(:focus-visible),
  textarea:focus:not(:focus-visible),
  button:focus:not(:focus-visible) {
    outline: none;
  }

  /* Typography - Refined hierarchy */
  h1 {
    font-size: var(--text-6xl);
    font-weight: 300;
    letter-spacing: var(--tracking-tighter);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-lg);
  }

  h2 {
    font-size: var(--text-5xl);
    font-weight: 300;
    letter-spacing: var(--tracking-tight);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-md);
  }

  h3 {
    font-size: var(--text-4xl);
    font-weight: 400;
    letter-spacing: var(--tracking-tight);
    line-height: var(--leading-snug);
    margin-bottom: var(--space-md);
  }

  h4 {
    font-size: var(--text-3xl);
    font-weight: 400;
    letter-spacing: var(--tracking-normal);
    line-height: var(--leading-snug);
    margin-bottom: var(--space-sm);
  }

  h5 {
    font-size: var(--text-2xl);
    font-weight: 500;
    letter-spacing: var(--tracking-normal);
    line-height: var(--leading-snug);
    margin-bottom: var(--space-sm);
  }

  h6 {
    font-size: var(--text-xl);
    font-weight: 500;
    letter-spacing: var(--tracking-normal);
    line-height: var(--leading-snug);
    margin-bottom: var(--space-sm);
  }

  p, a, input, textarea {
    font-size: var(--text-base);
    font-weight: 400;
    letter-spacing: var(--tracking-normal);
    line-height: var(--leading-relaxed);
    margin-bottom: var(--space-md);
  }

  p:last-child {
    margin-bottom: 0;  /* Remove bottom margin from last paragraph */
  }

  caption {
    font-size: var(--text-xs);
    font-weight: 400;
    letter-spacing: var(--tracking-wide);
    line-height: var(--leading-normal);
  }

  button {
    font-size: var(--text-sm);
    font-weight: 600;
    letter-spacing: var(--tracking-wider);
    line-height: var(--leading-normal);
  }

  button.dropdown {
    font-size: var(--text-base);
    font-weight: 400;
    letter-spacing: var(--tracking-normal);
    line-height: var(--leading-normal);
  }

  sup { vertical-align: super; }
  sub { vertical-align: sub; }

  /* Form Elements */
  input, textarea {
    font-family: inherit;
    font-size: inherit;
    opacity: 0.87;
  }

  /* Links */
  a { 
    text-decoration: underline;
    transition: color var(--duration-normal) var(--ease-out);
  }

  a.link, a.link:link, a.link:visited, a.link:active {
    color: var(--link-color);
  }
  
  a.link:hover {
    color: var(--link-highlight-color);
  }
}

/*///////////////////////////////////////////////////////////////////////////*/
/* COMPONENTS LAYER                                                          */
@layer components {
  /* Utility Classes for Text */
  .ellipsis {
    display: block;
    overflow: hidden;
    position: relative;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
  }

  .noselect {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Layout Components */
  .center, .center_horizontally {
    align-content: center;
    align-items: center;
    display: flex;
    flex-direction: row;
    flex-flow: nowrap;
    justify-content: center;
  }

  .center_vertically {
    align-content: center;
    align-items: center;
    display: flex;
    flex-direction: column;
    flex-flow: nowrap;
    justify-content: center;
  }

  .center_gapped { gap: var(--space-md); }

  .column {
    display: flex;
    flex-direction: column;
    margin: 0;
    padding: 0;
  }

  .row {
    display: flex;
    flex-direction: row;
    margin: 0;
    padding: 0;
  }

  /* Container Components */
  .main_container {
    display: flex;
    flex-direction: column;
    margin: 0;
    min-height: 100vh;
    padding: 0;
  }

  .main_content {
    flex-grow: 1;
    min-height: 100vh;
  }

  /* Overflow Components with Modern Scrollbars */
  .overflow {
    overflow: hidden;
    padding: 0;
  }

  .overflow_x {
    overflow-x: auto;
    padding: 0;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
  }

  .overflow_y {
    overflow-y: auto;
    padding: 0;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
  }

  /* WebKit Scrollbar Styling */
  .overflow_x::-webkit-scrollbar,
  .overflow_y::-webkit-scrollbar {
    width: 12px;
    height: 12px;
  }

  .overflow_x::-webkit-scrollbar-track,
  .overflow_y::-webkit-scrollbar-track {
    background-color: var(--scrollbar-track);
    border-radius: var(--radius);
  }

  .overflow_x::-webkit-scrollbar-thumb,
  .overflow_y::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb);
    background-clip: content-box;
    border: 2px solid transparent;
    border-radius: var(--radius);
    transition: background-color var(--duration-normal) var(--ease-out);
  }

  .overflow_x::-webkit-scrollbar-thumb:hover,
  .overflow_y::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-highlight);
    cursor: pointer;
  }

  /* Icon Components */
  .icon {
    cursor: pointer;
    filter: var(--body-icon-filter);
    transition: filter var(--duration-normal) var(--ease-out);
  }

  .icon:hover {
    filter: var(--body-icon-highlight-filter);
  }

  a.link .icon {
    filter: var(--body-icon-filter);
  }

  a.link:hover .icon {
    filter: var(--body-icon-highlight-filter);
  }

  /* Input Components */
  .input_container {
    display: flex;
    border-left: none;
    border-right: none;
    border-top: none;
    border-bottom: 2px solid transparent;
    gap: 0;
    transition: border-color var(--duration-normal) var(--ease-out);
  }

  .input_container:focus-within {
    border-image: linear-gradient(45deg, #91f3d1, #6dc0f0) 1;
  }

  input, .input_button {
    background-color: var(--color-input);
    border-bottom: 2px solid transparent;
    border-left: none;
    border-right: none;
    border-top: none;
    color: var(--color-text-light-high);
    padding: var(--space-sm) var(--space-md);
    transition: all var(--duration-normal) var(--ease-out);
  }

  .input_button {
    cursor: pointer;
  }

  .input_button:hover {
    color: var(--color-text-light-high);
  }

  ::placeholder, .input_button { 
    color: var(--color-placeholder); 
  }

  input.hidden_autocomplete {
    background-color: transparent !important;
    border-color: transparent !important;
    color: transparent !important;
    display: block !important;
    height: 1px !important;
    visibility: visible !important;
    width: 1px !important;
  }
}

/*///////////////////////////////////////////////////////////////////////////*/
/* UTILITIES LAYER                                                           */
@layer utilities {
  /* Spacing Utilities - Golden Ratio Scale */
  .gap-2xs { gap: var(--space-2xs); }
  .gap-xs { gap: var(--space-xs); }
  .gap-sm { gap: var(--space-sm); }
  .gap-md { gap: var(--space-md); }
  .gap-lg { gap: var(--space-lg); }
  .gap-xl { gap: var(--space-xl); }
  .gap-2xl { gap: var(--space-2xl); }
  .gap-3xl { gap: var(--space-3xl); }

  .p-2xs { padding: var(--space-2xs); }
  .p-xs { padding: var(--space-xs); }
  .p-sm { padding: var(--space-sm); }
  .p-md { padding: var(--space-md); }
  .p-lg { padding: var(--space-lg); }
  .p-xl { padding: var(--space-xl); }
  .p-2xl { padding: var(--space-2xl); }
  .p-3xl { padding: var(--space-3xl); }

  .m-2xs { margin: var(--space-2xs); }
  .m-xs { margin: var(--space-xs); }
  .m-sm { margin: var(--space-sm); }
  .m-md { margin: var(--space-md); }
  .m-lg { margin: var(--space-lg); }
  .m-xl { margin: var(--space-xl); }
  .m-2xl { margin: var(--space-2xl); }
  .m-3xl { margin: var(--space-3xl); }

  /* Inline spacing utilities */
  .px-2xs { padding-inline: var(--space-2xs); }
  .px-xs { padding-inline: var(--space-xs); }
  .px-sm { padding-inline: var(--space-sm); }
  .px-md { padding-inline: var(--space-md); }
  .px-lg { padding-inline: var(--space-lg); }
  .px-xl { padding-inline: var(--space-xl); }
  .px-2xl { padding-inline: var(--space-2xl); }
  .px-3xl { padding-inline: var(--space-3xl); }

  .py-2xs { padding-block: var(--space-2xs); }
  .py-xs { padding-block: var(--space-xs); }
  .py-sm { padding-block: var(--space-sm); }
  .py-md { padding-block: var(--space-md); }
  .py-lg { padding-block: var(--space-lg); }
  .py-xl { padding-block: var(--space-xl); }
  .py-2xl { padding-block: var(--space-2xl); }
  .py-3xl { padding-block: var(--space-3xl); }

  .mx-auto { margin-inline: auto; }
  .my-auto { margin-block: auto; }

  /* Spacer Utilities */
  .spacer { height: var(--space-xl); }
  .spacer-sm { height: var(--space-lg); }
  .spacer-lg { height: var(--space-2xl); }
  .spacer-xl { height: var(--space-3xl); }
  .spacer-2xl { height: var(--space-4xl); }

  /* Visibility Utilities */
  .hidden {
    display: none !important;
    margin: 0 !important;
    padding: 0 !important;
    visibility: hidden !important;
  }

  .no_size {
    height: 0 !important;
    max-height: 0 !important;
    max-width: 0 !important;
    min-height: 0 !important;
    min-width: 0 !important;
    width: 0 !important;
  }

  /* Border Radius Utilities - Golden Ratio Scale */
  .rounded-xs { border-radius: var(--radius-xs); }
  .rounded-sm { border-radius: var(--radius-sm); }
  .rounded { border-radius: var(--radius); }
  .rounded-lg { border-radius: var(--radius-lg); }
  .rounded-full { border-radius: 9999px; }

  /* Shadow Utilities - Golden Ratio Scale */
  .shadow-sm { box-shadow: var(--shadow-sm); }
  .shadow { box-shadow: var(--shadow); }
  .shadow-lg { box-shadow: var(--shadow-lg); }
  .shadow-xl { box-shadow: var(--shadow-xl); }
  .shadow-2xl { box-shadow: var(--shadow-2xl); }
  .shadow-none { box-shadow: none; }

  /* Typography Utilities */
  .text-xs { font-size: var(--text-xs); }
  .text-sm { font-size: var(--text-sm); }
  .text-base { font-size: var(--text-base); }
  .text-lg { font-size: var(--text-lg); }
  .text-xl { font-size: var(--text-xl); }
  .text-2xl { font-size: var(--text-2xl); }
  .text-3xl { font-size: var(--text-3xl); }
  .text-4xl { font-size: var(--text-4xl); }
  .text-5xl { font-size: var(--text-5xl); }
  .text-6xl { font-size: var(--text-6xl); }

  .leading-none { line-height: var(--leading-none); }
  .leading-tight { line-height: var(--leading-tight); }
  .leading-snug { line-height: var(--leading-snug); }
  .leading-normal { line-height: var(--leading-normal); }
  .leading-relaxed { line-height: var(--leading-relaxed); }
  .leading-loose { line-height: var(--leading-loose); }

  .tracking-tighter { letter-spacing: var(--tracking-tighter); }
  .tracking-tight { letter-spacing: var(--tracking-tight); }
  .tracking-normal { letter-spacing: var(--tracking-normal); }
  .tracking-wide { letter-spacing: var(--tracking-wide); }
  .tracking-wider { letter-spacing: var(--tracking-wider); }
  .tracking-widest { letter-spacing: var(--tracking-widest); }
  
  /* Display Typography */
  .display-1 {
    font-size: var(--text-6xl);
    font-weight: 300;
    letter-spacing: var(--tracking-tighter);
    line-height: var(--leading-tight);
  }
  
  .lead {
    font-size: var(--text-lg);
    font-weight: 400;
    line-height: var(--leading-normal);
    opacity: 0.9;
  }
  
  /* Background Color Utilities */
  .bg-subtle {
    background-color: var(--surface);
    color: var(--on-surface);
  }
  
  .bg-primary {
    background-color: var(--surface-primary);
    color: var(--on-surface-primary);
  }
  
  .bg-secondary {
    background-color: var(--surface-secondary);
    color: var(--on-surface-secondary);
  }
  
  .bg-success {
    background-color: var(--surface-success);
    color: var(--on-surface-success);
  }
  
  .bg-warning {
    background-color: var(--surface-caution);
    color: var(--on-surface-caution);
  }
  
  .bg-info {
    background-color: var(--surface-secondary-hover);
    color: var(--on-surface-secondary);
  }
  
  .bg-dark {
    background-color: var(--surface-dark);
    color: var(--on-surface-dark);
  }
  
  .bg-primary-subtle {
    background-color: rgba(0, 191, 111, 0.1);
    border-left: 4px solid var(--surface-primary);
  }
  
  .dark-mode .bg-primary-subtle {
    background-color: rgba(0, 191, 111, 0.15);
  }
  
  /* Text Color Utilities */
  .text-white {
    color: var(--on-surface-primary);
  }
  
  /* List Utilities */
  .list-styled {
    padding-left: var(--space-lg);
  }
  
  .list-styled li {
    margin-bottom: var(--space-xs);
  }
}
